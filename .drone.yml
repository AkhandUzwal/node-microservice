kind: pipeline
name: default

steps:

- name: build
  image: node:9.8.0
  commands:
  - sh ./.drone/build.sh

- name: publish
  image: plugins/docker
  settings:
    repo: nishanthkp/node-microservice
    tags: ["build_${DRONE_BUILD_NUMBER}", "latest"]
    when:
      branch: master
      event: commit
    username:
      from_secret: DOCKERHUB_USERNAME
    password:
      from_secret: DOCKERHUB_PASSWORD
  
